---
title: "理解MapReduce"
date: 2019-07-01T21:18:06+08:00
draft: false
---

假如我們有一份很大的數據需要處理，只用單進程單線程需要大量的運行時間，為了減少執行時間，我們可以用多進程多線程并發執行，把一個大的數據划分為獨立較小的數據，然後交給這些進程獨立執行，當這些較小的數據處理完後，我們可以很容易把它們合并成最終結果，這是典型的分治算法，也是MapReduce的主要思想。

當然MapReduce要處理的是大數據的問題，需要解決的事比上面遠大得多。因為單台計算機最後也會出現性能瓶頸，不單擴展單台計算機比較困難且昂貴，而且當單台計算機Crash後，之前所處理的數據全都白費了，所以MapReduce的架構是主要是為了能在多個計算機上實現并行化計算。通過MapReduce可以在大量普通的計算機上實現高性能計算，而且具有可擴展性和高可性的特點。

MapReduce執行部分簡單可以分為單個**Master**和多個**Worker**，**Master**就像公司里的Leader，負責管理，調度和分配任務給小弟，而**Worker**就是拼了命工作的那些小弟，為了防了單台計算機，這些**Worker**分布在集群中不同的計算機上執行，當一個計算機Crash後，**Master**可以將那台計算機所執行的任務分配給其他**Worker**，這樣實現了高可用。那Master死後怎麼辦？那只能呵呵呵了，當然有各種方式可以解決，其中一種就是通知用戶**Master** Crash了，讓用戶決定處理方法。

![Google Reduce](/media/Google_MapReduce.jpg)



通過MapReduce，我們可以不用處理分布式上遇到的各種問題，MapReduce為我們處理了并行編程中分布存儲、工作調度、負載均衡、容錯處理及網絡通信等複雜問題，我們需要輕鬆愉快的編寫兩個函數即可：map和reduce。map負責把任務分解成多個任務，reduce負責把分解後任務處理的結果汇總起來。需要注意的是，用MapReduce來處理的數據集（或任務）必須具備這樣的特點：待處理的數據集可以分解成計多小的數據集，而且每一個小數據集都可以完全并行地處理。
